@page
@inject IOptions<StripeSettings> Stripe
@model Shop.UI.Pages.Checkout.PaymentModel
@{
}


<div class="columns">
    <div class="column is-6">
        <p class="title">Payment</p>
        <form method="post">
            <div class="field">
                <script src="//checkout.stripe.com/v2/checkout.js" class="stripe-button" data-key="@Stripe.Value.PublishableKey" data-locale="auto" data-description="Sample Charge" data-amount="@Model.TotalValueInt">
                </script>
            </div>
            <div class="field">
                <button class="button is-success" type="submit">Pay with Card</button>
            </div>
        </form>
    </div>
    <div class="column is-6">
        <vc:cart view="Default"></vc:cart>
    </div>
</div>

@section scripts {
    <script>
        // Hide default stripe button, be careful there if you
        // have more than 1 button of that class
        document.body.getElementsByClassName("stripe-button-el")[0].style.display = 'none';
    </script>
}